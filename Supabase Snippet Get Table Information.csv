"?column?"
"-- Table: auction_display_config

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
tournament_id uuid NOT NULL
initial_timer_seconds integer NOT NULL DEFAULT 30
subsequent_timer_seconds integer NOT NULL DEFAULT 20
first_call_seconds integer NOT NULL DEFAULT 10
second_call_seconds integer NOT NULL DEFAULT 5
final_call_seconds integer NOT NULL DEFAULT 2
enable_sound boolean DEFAULT true
enable_visual_effects boolean DEFAULT true
created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP

CONSTRAINTS:\nCONSTRAINT auction_display_config_pkey PRIMARY KEY (id)
CONSTRAINT auction_display_config_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_display_config_tournament_id_key UNIQUE (tournament_id)

INDEXES:\nCREATE UNIQUE INDEX auction_display_config_pkey ON public.auction_display_config USING btree (id)
CREATE UNIQUE INDEX auction_display_config_tournament_id_key ON public.auction_display_config USING btree (tournament_id)

FOREIGN KEYS:\nCONSTRAINT auction_display_config_pkey PRIMARY KEY (id)
CONSTRAINT auction_display_config_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_display_config_tournament_id_key UNIQUE (tournament_id)

TRIGGERS:\nCREATE TRIGGER update_auction_display_config_updated_at BEFORE UPDATE ON auction_display_config FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: auction_queue

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
tournament_id uuid NOT NULL
player_id uuid NOT NULL
queue_position integer NOT NULL
is_processed boolean DEFAULT false
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT auction_queue_pkey PRIMARY KEY (id)
CONSTRAINT auction_queue_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT auction_queue_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_queue_tournament_id_player_id_key UNIQUE (tournament_id, tournament_id, player_id, player_id)
CONSTRAINT auction_queue_tournament_id_queue_position_key UNIQUE (tournament_id, tournament_id, queue_position, queue_position)

INDEXES:\nCREATE INDEX idx_auction_queue_tournament ON public.auction_queue USING btree (tournament_id) WHERE (NOT is_processed)
CREATE UNIQUE INDEX auction_queue_pkey ON public.auction_queue USING btree (id)
CREATE UNIQUE INDEX auction_queue_tournament_id_player_id_key ON public.auction_queue USING btree (tournament_id, player_id)
CREATE INDEX idx_auction_queue_position ON public.auction_queue USING btree (tournament_id, queue_position)
CREATE UNIQUE INDEX auction_queue_tournament_id_queue_position_key ON public.auction_queue USING btree (tournament_id, queue_position)

FOREIGN KEYS:\nCONSTRAINT auction_queue_pkey PRIMARY KEY (id)
CONSTRAINT auction_queue_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT auction_queue_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_queue_tournament_id_player_id_key UNIQUE (tournament_id, tournament_id, player_id, player_id)
CONSTRAINT auction_queue_tournament_id_queue_position_key UNIQUE (tournament_id, tournament_id, queue_position, queue_position)

POLICIES:\nPOLICY Enable read access for authenticated users FOR * TO authenticated
  USING (true)
POLICY Enable write access for admin users FOR * TO authenticated
  USING (((auth.jwt() ->> 'role'::text) = ANY (ARRAY['ADMIN'::text, 'CONDUCTOR'::text])))

TRIGGERS:\nCREATE TRIGGER update_auction_queue_updated_at BEFORE UPDATE ON auction_queue FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: auction_rounds

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
player_id uuid NOT NULL
starting_price integer NOT NULL
final_price integer
winning_team_id uuid
status USER-DEFINED NOT NULL DEFAULT 'NOT_STARTED'::auction_status
start_time timestamp with time zone NOT NULL DEFAULT now()
end_time timestamp with time zone
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()
final_points integer
is_manual_entry boolean DEFAULT false
conductor_notes text
display_sequence integer
auction_date date DEFAULT CURRENT_DATE
tournament_id uuid NOT NULL

CONSTRAINTS:\nCONSTRAINT auction_rounds_pkey PRIMARY KEY (id)
CONSTRAINT auction_rounds_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT auction_rounds_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_rounds_winning_team_id_fkey FOREIGN KEY (winning_team_id) REFERENCES teams(id)

INDEXES:\nCREATE INDEX idx_auction_rounds_tournament_id ON public.auction_rounds USING btree (tournament_id)
CREATE UNIQUE INDEX auction_rounds_pkey ON public.auction_rounds USING btree (id)
CREATE INDEX idx_auction_rounds_winning_team ON public.auction_rounds USING btree (winning_team_id)

FOREIGN KEYS:\nCONSTRAINT auction_rounds_pkey PRIMARY KEY (id)
CONSTRAINT auction_rounds_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT auction_rounds_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT auction_rounds_winning_team_id_fkey FOREIGN KEY (winning_team_id) REFERENCES teams(id)

POLICIES:\nPOLICY Enable read access for all users FOR * TO public
  USING (true)
POLICY Enable insert access for all users FOR * TO public
  WITH CHECK (true)
POLICY Enable update access for all users FOR * TO public
  USING (true)
POLICY Enable delete access for all users FOR * TO public
  USING (true)
POLICY Only conductor can create rounds FOR * TO authenticated
  WITH CHECK ((EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND (users.role = 'CONDUCTOR'::user_role)))))
POLICY Enable all access for authenticated users FOR * TO public
  USING ((auth.role() = 'authenticated'::text))
  WITH CHECK ((auth.role() = 'authenticated'::text))
POLICY Auction rounds access policy FOR * TO public
  USING (
CASE
    WHEN ((auth.jwt() ->> 'role'::text) = ANY (ARRAY['ADMIN'::text, 'CONDUCTOR'::text])) THEN true
    ELSE (EXISTS ( SELECT 1
       FROM teams
      WHERE ((teams.id = auction_rounds.winning_team_id) AND (teams.owner_id = auth.uid()))))
END)
POLICY Only conductor can update rounds FOR * TO authenticated
  USING ((EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND (users.role = 'CONDUCTOR'::user_role)))))

TRIGGERS:\nCREATE TRIGGER update_auction_rounds_updated_at BEFORE UPDATE ON auction_rounds FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()
CREATE TRIGGER update_team_points_after_allocation AFTER UPDATE ON auction_rounds FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_team_points_on_allocation()

---------------------------------------\n"
"-- Table: auction_settings

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
min_players_per_team integer NOT NULL DEFAULT 7
max_players_per_team integer NOT NULL DEFAULT 14
min_bid_increment integer NOT NULL DEFAULT 100000
timer_duration_seconds integer NOT NULL DEFAULT 30
min_setters integer NOT NULL DEFAULT 1
min_outside_hitters integer NOT NULL DEFAULT 2
min_middle_blockers integer NOT NULL DEFAULT 2
min_opposites integer NOT NULL DEFAULT 1
min_liberos integer NOT NULL DEFAULT 1
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT auction_settings_pkey PRIMARY KEY (id)

INDEXES:\nCREATE UNIQUE INDEX auction_settings_pkey ON public.auction_settings USING btree (id)

FOREIGN KEYS:\nCONSTRAINT auction_settings_pkey PRIMARY KEY (id)

POLICIES:\nPOLICY Enable all access for authenticated users FOR * TO public
  USING ((auth.role() = 'authenticated'::text))
  WITH CHECK ((auth.role() = 'authenticated'::text))

TRIGGERS:\nCREATE TRIGGER update_auction_settings_updated_at BEFORE UPDATE ON auction_settings FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()
CREATE TRIGGER enforce_single_settings_row BEFORE INSERT ON auction_settings FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION enforce_single_settings_row()

---------------------------------------\n"
"-- Table: auction_state

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
status text NOT NULL DEFAULT 'WAITING'::text
current_player_id uuid
current_round integer NOT NULL DEFAULT 0
bid_end_time timestamp with time zone
winning_bid_id uuid
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT auction_state_current_player_id_fkey FOREIGN KEY (current_player_id) REFERENCES players(id)
CONSTRAINT auction_state_pkey PRIMARY KEY (id)
CONSTRAINT auction_state_winning_bid_id_fkey FOREIGN KEY (winning_bid_id) REFERENCES bids(id)

INDEXES:\nCREATE UNIQUE INDEX auction_state_pkey ON public.auction_state USING btree (id)

FOREIGN KEYS:\nCONSTRAINT auction_state_current_player_id_fkey FOREIGN KEY (current_player_id) REFERENCES players(id)
CONSTRAINT auction_state_pkey PRIMARY KEY (id)
CONSTRAINT auction_state_winning_bid_id_fkey FOREIGN KEY (winning_bid_id) REFERENCES bids(id)

TRIGGERS:\nCREATE TRIGGER update_auction_state_updated_at BEFORE UPDATE ON auction_state FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: bids

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
round_id uuid NOT NULL
team_id uuid NOT NULL
amount integer NOT NULL
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT bids_pkey PRIMARY KEY (id)
CONSTRAINT bids_round_id_fkey FOREIGN KEY (round_id) REFERENCES auction_rounds(id)
CONSTRAINT bids_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)

INDEXES:\nCREATE UNIQUE INDEX bids_pkey ON public.bids USING btree (id)

FOREIGN KEYS:\nCONSTRAINT bids_pkey PRIMARY KEY (id)
CONSTRAINT bids_round_id_fkey FOREIGN KEY (round_id) REFERENCES auction_rounds(id)
CONSTRAINT bids_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)

POLICIES:\nPOLICY Enable read access for all users FOR * TO public
  USING (true)
POLICY Enable delete access for all users FOR * TO public
  USING (true)
POLICY Team owners can only bid for their team FOR * TO authenticated
  WITH CHECK ((EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role = 'CONDUCTOR'::user_role) OR ((users.role = 'TEAM_OWNER'::user_role) AND (users.team_id = bids.team_id)))))))
POLICY Enable insert access for all users FOR * TO public
  WITH CHECK (true)
POLICY Enable update access for all users FOR * TO public
  USING (true)
POLICY Enable all access for authenticated users FOR * TO public
  USING ((auth.role() = 'authenticated'::text))
  WITH CHECK ((auth.role() = 'authenticated'::text))

TRIGGERS:\nCREATE TRIGGER notify_new_bid AFTER INSERT ON bids FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION handle_new_bid()
CREATE TRIGGER update_bids_updated_at BEFORE UPDATE ON bids FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: categories

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
tournament_id uuid NOT NULL
name text NOT NULL
category_type USER-DEFINED NOT NULL DEFAULT 'LEVEL_1'::category_type
base_points integer NOT NULL DEFAULT 200
min_points integer NOT NULL DEFAULT 100
max_points integer NOT NULL DEFAULT 400
description text
skill_level USER-DEFINED NOT NULL DEFAULT 'COMPETITIVE_A'::skill_level
created_at timestamp with time zone DEFAULT now()
updated_at timestamp with time zone DEFAULT now()

CONSTRAINTS:\nCONSTRAINT categories_pkey PRIMARY KEY (id)
CONSTRAINT categories_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT categories_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

INDEXES:\nCREATE INDEX idx_categories_tournament ON public.categories USING btree (tournament_id)
CREATE UNIQUE INDEX categories_pkey ON public.categories USING btree (id)
CREATE UNIQUE INDEX categories_tournament_id_name_key ON public.categories USING btree (tournament_id, name)

FOREIGN KEYS:\nCONSTRAINT categories_pkey PRIMARY KEY (id)
CONSTRAINT categories_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT categories_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

POLICIES:\nPOLICY Enable read access for authenticated users FOR * TO authenticated
  USING (true)
POLICY Enable write access for authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)

---------------------------------------\n"
"-- Table: player_achievements

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
player_id uuid NOT NULL
tournament_name text
achievement_type USER-DEFINED NOT NULL
title text NOT NULL
description text
achievement_date date
created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP

CONSTRAINTS:\nCONSTRAINT player_achievements_pkey PRIMARY KEY (id)
CONSTRAINT player_achievements_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)

INDEXES:\nCREATE INDEX idx_player_achievements_player ON public.player_achievements USING btree (player_id)
CREATE UNIQUE INDEX player_achievements_pkey ON public.player_achievements USING btree (id)

FOREIGN KEYS:\nCONSTRAINT player_achievements_pkey PRIMARY KEY (id)
CONSTRAINT player_achievements_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)

POLICIES:\nPOLICY Player achievements are viewable by authenticated users FOR * TO authenticated
  USING (true)
POLICY Player achievements are modifiable by authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)

TRIGGERS:\nCREATE TRIGGER update_player_achievements_updated_at BEFORE UPDATE ON player_achievements FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: player_categories

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
tournament_id uuid NOT NULL
name text NOT NULL
category_type USER-DEFINED NOT NULL
base_points integer NOT NULL
min_points integer NOT NULL
max_points integer
description text
skill_level USER-DEFINED NOT NULL
created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP

CONSTRAINTS:\nCONSTRAINT player_categories_pkey PRIMARY KEY (id)
CONSTRAINT player_categories_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT player_categories_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

INDEXES:\nCREATE UNIQUE INDEX player_categories_pkey ON public.player_categories USING btree (id)
CREATE INDEX idx_player_categories_tournament ON public.player_categories USING btree (tournament_id)
CREATE UNIQUE INDEX player_categories_tournament_id_name_key ON public.player_categories USING btree (tournament_id, name)

FOREIGN KEYS:\nCONSTRAINT player_categories_pkey PRIMARY KEY (id)
CONSTRAINT player_categories_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT player_categories_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

POLICIES:\nPOLICY Enable write access for authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)
POLICY Player categories are viewable by authenticated users FOR * TO authenticated
  USING (true)
POLICY Player categories are modifiable by authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)
POLICY Enable read access for authenticated users FOR * TO authenticated
  USING (true)

TRIGGERS:\nCREATE TRIGGER update_player_categories_updated_at BEFORE UPDATE ON player_categories FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: player_tournament_history

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
player_id uuid NOT NULL
name text NOT NULL
year integer NOT NULL
role text NOT NULL
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT player_tournament_history_pkey PRIMARY KEY (id)
CONSTRAINT player_tournament_history_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)

INDEXES:\nCREATE INDEX idx_player_history_player ON public.player_tournament_history USING btree (player_id)
CREATE UNIQUE INDEX player_tournament_history_pkey ON public.player_tournament_history USING btree (id)

FOREIGN KEYS:\nCONSTRAINT player_tournament_history_pkey PRIMARY KEY (id)
CONSTRAINT player_tournament_history_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)

TRIGGERS:\nCREATE TRIGGER update_player_history_updated_at BEFORE UPDATE ON player_tournament_history FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: players

COLUMNS:\nid uuid NOT NULL DEFAULT gen_random_uuid()
name character varying(100) NOT NULL
age integer
player_position USER-DEFINED NOT NULL
base_price integer NOT NULL
current_team_id uuid
image_url text
status USER-DEFINED DEFAULT 'AVAILABLE'::player_status
phone_number character varying(15)
apartment_number character varying(50)
jersey_number character varying(10)
skill_level USER-DEFINED
height integer
experience integer
created_at timestamp with time zone DEFAULT timezone('utc'::text, now())
updated_at timestamp with time zone DEFAULT timezone('utc'::text, now())
tshirt_size USER-DEFINED
category_id uuid
registration_data jsonb
profile_image_url text

CONSTRAINTS:\nCONSTRAINT players_category_id_fkey FOREIGN KEY (category_id) REFERENCES player_categories(id)
CONSTRAINT players_pkey PRIMARY KEY (id)

INDEXES:\nCREATE UNIQUE INDEX players_pkey ON public.players USING btree (id)
CREATE INDEX idx_players_skill_level ON public.players USING btree (skill_level)
CREATE INDEX idx_players_status ON public.players USING btree (status)
CREATE INDEX idx_players_current_team ON public.players USING btree (current_team_id)
CREATE INDEX idx_players_position ON public.players USING btree (player_position)

FOREIGN KEYS:\nCONSTRAINT players_category_id_fkey FOREIGN KEY (category_id) REFERENCES player_categories(id)
CONSTRAINT players_pkey PRIMARY KEY (id)

POLICIES:\nPOLICY Enable all access for authenticated users FOR * TO public
  USING (true)
  WITH CHECK (true)
POLICY Allow public read access FOR * TO public
  USING (true)

TRIGGERS:\nCREATE TRIGGER sync_profile_image_from_player_trigger AFTER UPDATE ON players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION sync_profile_image_from_player()
CREATE TRIGGER update_base_price_trigger BEFORE UPDATE ON players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_base_price_on_skill_change()
CREATE TRIGGER validate_combined_requirements BEFORE UPDATE ON players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION check_combined_requirements()
CREATE TRIGGER copy_profile_image_url_trigger AFTER INSERT ON players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION copy_profile_image_url()
CREATE TRIGGER set_timestamp_players BEFORE UPDATE ON players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION trigger_set_timestamp()

---------------------------------------\n"
"-- Table: players_backup_sizes

COLUMNS:\nid uuid NOT NULL DEFAULT gen_random_uuid()
name character varying(100) NOT NULL
age integer
player_position USER-DEFINED NOT NULL
base_price integer NOT NULL
current_team_id uuid
image_url text
status USER-DEFINED DEFAULT 'AVAILABLE'::player_status
phone_number character varying(15)
apartment_number character varying(50)
jersey_number character varying(10)
skill_level USER-DEFINED
height integer
experience integer
created_at timestamp with time zone DEFAULT timezone('utc'::text, now())
updated_at timestamp with time zone DEFAULT timezone('utc'::text, now())

CONSTRAINTS:\nCONSTRAINT players_backup_sizes_pkey PRIMARY KEY (id)

INDEXES:\nCREATE UNIQUE INDEX players_backup_sizes_pkey ON public.players_backup_sizes USING btree (id)
CREATE INDEX players_backup_sizes_status_idx ON public.players_backup_sizes USING btree (status)
CREATE INDEX players_backup_sizes_player_position_idx ON public.players_backup_sizes USING btree (player_position)
CREATE INDEX players_backup_sizes_skill_level_idx ON public.players_backup_sizes USING btree (skill_level)

FOREIGN KEYS:\nCONSTRAINT players_backup_sizes_pkey PRIMARY KEY (id)

---------------------------------------\n"
"-- Table: players_backup_youth_sizes

COLUMNS:\nid uuid
name character varying(100)
age integer
player_position USER-DEFINED
base_price integer
current_team_id uuid
image_url text
status USER-DEFINED
phone_number character varying(15)
apartment_number character varying(50)
jersey_number character varying(10)
skill_level USER-DEFINED
height integer
experience integer
created_at timestamp with time zone
updated_at timestamp with time zone

---------------------------------------\n"
"-- Table: preferred_players

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
team_id uuid NOT NULL
player_id uuid NOT NULL
priority integer NOT NULL DEFAULT 1
notes text
created_at timestamp with time zone DEFAULT now()
updated_at timestamp with time zone DEFAULT now()
max_bid integer NOT NULL

CONSTRAINTS:\nCONSTRAINT preferred_players_pkey PRIMARY KEY (id)
CONSTRAINT preferred_players_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT preferred_players_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)
CONSTRAINT preferred_players_team_id_player_id_key UNIQUE (team_id, team_id, player_id, player_id)

INDEXES:\nCREATE UNIQUE INDEX preferred_players_pkey ON public.preferred_players USING btree (id)
CREATE INDEX idx_preferred_players_team ON public.preferred_players USING btree (team_id)
CREATE INDEX idx_preferred_players_player ON public.preferred_players USING btree (player_id)
CREATE INDEX idx_preferred_players_composite ON public.preferred_players USING btree (team_id, player_id)
CREATE UNIQUE INDEX preferred_players_team_id_player_id_key ON public.preferred_players USING btree (team_id, player_id)

FOREIGN KEYS:\nCONSTRAINT preferred_players_pkey PRIMARY KEY (id)
CONSTRAINT preferred_players_player_id_fkey FOREIGN KEY (player_id) REFERENCES players(id)
CONSTRAINT preferred_players_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)
CONSTRAINT preferred_players_team_id_player_id_key UNIQUE (team_id, team_id, player_id, player_id)

POLICIES:\nPOLICY Enable read access for authenticated users FOR * TO authenticated
  USING (true)
POLICY Enable write access for authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)

TRIGGERS:\nCREATE TRIGGER validate_max_bid_before_insert_update BEFORE UPDATE ON preferred_players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION validate_max_bid()
CREATE TRIGGER validate_max_bid_before_insert_update BEFORE INSERT ON preferred_players FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION validate_max_bid()

---------------------------------------\n"
"-- Table: team_budget_analysis

COLUMNS:\nteam_id uuid
team_name character varying(100)
initial_budget integer
remaining_budget integer
number_of_preferred_players bigint
total_preferred_points bigint
potential_remaining_budget bigint

---------------------------------------\n"
"-- Table: team_combined_requirements

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
team_id uuid NOT NULL
position USER-DEFINED NOT NULL
skill_level USER-DEFINED NOT NULL
min_players integer NOT NULL DEFAULT 0
max_players integer NOT NULL
current_count integer NOT NULL DEFAULT 0
points_allocated integer NOT NULL DEFAULT 0
created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP

CONSTRAINTS:\nCONSTRAINT team_combined_requirements_pkey PRIMARY KEY (id)
CONSTRAINT team_combined_requirements_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)
CONSTRAINT team_combined_requirements_team_id_position_skill_level_key UNIQUE (team_id, team_id, team_id, position, position, position, skill_level, skill_level, skill_level)

INDEXES:\nCREATE UNIQUE INDEX team_combined_requirements_team_id_position_skill_level_key ON public.team_combined_requirements USING btree (team_id, "position", skill_level)
CREATE UNIQUE INDEX team_combined_requirements_pkey ON public.team_combined_requirements USING btree (id)

FOREIGN KEYS:\nCONSTRAINT team_combined_requirements_pkey PRIMARY KEY (id)
CONSTRAINT team_combined_requirements_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)
CONSTRAINT team_combined_requirements_team_id_position_skill_level_key UNIQUE (team_id, team_id, team_id, position, position, position, skill_level, skill_level, skill_level)

POLICIES:\nPOLICY Team combined requirements are viewable by authenticated users FOR * TO authenticated
  USING (true)
POLICY Team combined requirements are modifiable by authenticated user FOR * TO authenticated
  USING (true)
  WITH CHECK (true)

TRIGGERS:\nCREATE TRIGGER update_team_combined_requirements_updated_at BEFORE UPDATE ON team_combined_requirements FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: team_summaries

COLUMNS:\nid uuid
name character varying(100)
budget integer
player_count bigint
position_distribution jsonb

---------------------------------------\n"
"-- Table: teams

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
name character varying(100) NOT NULL
owner_name character varying(100) NOT NULL
initial_budget integer NOT NULL DEFAULT 5000000
remaining_budget integer NOT NULL DEFAULT 5000000
max_players integer NOT NULL DEFAULT 12
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()
owner_id uuid NOT NULL
tournament_id uuid NOT NULL

CONSTRAINTS:\nCONSTRAINT teams_pkey PRIMARY KEY (id)
CONSTRAINT teams_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT teams_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

INDEXES:\nCREATE UNIQUE INDEX teams_tournament_id_name_key ON public.teams USING btree (tournament_id, name)
CREATE UNIQUE INDEX teams_pkey ON public.teams USING btree (id)

FOREIGN KEYS:\nCONSTRAINT teams_pkey PRIMARY KEY (id)
CONSTRAINT teams_tournament_id_fkey FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
CONSTRAINT teams_tournament_id_name_key UNIQUE (tournament_id, tournament_id, name, name)

POLICIES:\nPOLICY Teams are viewable by authenticated users FOR * TO authenticated
  USING (true)
POLICY Teams are modifiable by authenticated users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)

TRIGGERS:\nCREATE TRIGGER update_teams_updated_at BEFORE UPDATE ON teams FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: tournament_registrations

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
first_name text NOT NULL
last_name text NOT NULL
phone_number text NOT NULL
flat_number text NOT NULL
height numeric NOT NULL
registration_category USER-DEFINED NOT NULL
registration_type text NOT NULL
playing_positions ARRAY NOT NULL
skill_level USER-DEFINED NOT NULL
tshirt_number text NOT NULL
tshirt_name text NOT NULL
payment_upi_id text NOT NULL
payment_transaction_id text NOT NULL
paid_to text NOT NULL
created_at timestamp with time zone DEFAULT now()
updated_at timestamp with time zone DEFAULT now()
is_verified boolean DEFAULT false
last_played_date USER-DEFINED NOT NULL
email text
date_of_birth date
parent_name text
parent_phone_number text
verified_by_old uuid
verified_at timestamp with time zone
verification_notes text
verified_by text
amount_received numeric
tshirt_size USER-DEFINED
profile_image_url text
profile_token text
profile_token_expires_at timestamp with time zone

CONSTRAINTS:\nCONSTRAINT tournament_registrations_pkey PRIMARY KEY (id)
CONSTRAINT tournament_registrations_profile_token_key UNIQUE (profile_token)

INDEXES:\nCREATE UNIQUE INDEX idx_unique_registration ON public.tournament_registrations USING btree (first_name, last_name, phone_number, flat_number, registration_category)
CREATE INDEX idx_skill_level ON public.tournament_registrations USING btree (skill_level)
CREATE INDEX idx_created_at ON public.tournament_registrations USING btree (created_at)
CREATE UNIQUE INDEX tournament_registrations_pkey ON public.tournament_registrations USING btree (id)
CREATE INDEX idx_registration_category ON public.tournament_registrations USING btree (registration_category)
CREATE UNIQUE INDEX tournament_registrations_profile_token_key ON public.tournament_registrations USING btree (profile_token)
CREATE INDEX idx_tournament_registrations_profile_token ON public.tournament_registrations USING btree (profile_token)
CREATE INDEX idx_tournament_registrations_verified_by ON public.tournament_registrations USING btree (verified_by)

FOREIGN KEYS:\nCONSTRAINT tournament_registrations_pkey PRIMARY KEY (id)
CONSTRAINT tournament_registrations_profile_token_key UNIQUE (profile_token)

POLICIES:\nPOLICY Allow authorized verifiers to view all registrations FOR * TO public
  USING (((auth.jwt() IS NOT NULL) AND (((auth.jwt() ->> 'email'::text) = 'amit@pbel.in'::text) OR ((auth.jwt() ->> 'email'::text) = 'vasu@pbel.in'::text))))
POLICY Enable public insert access FOR * TO public
  WITH CHECK (true)
POLICY Enable public read access FOR * TO public
  USING (true)
POLICY Allow authorized verifiers to update registrations FOR * TO public
  USING (((auth.jwt() IS NOT NULL) AND (((auth.jwt() ->> 'email'::text) = 'amit@pbel.in'::text) OR ((auth.jwt() ->> 'email'::text) = 'vasu@pbel.in'::text))))
  WITH CHECK (((auth.jwt() IS NOT NULL) AND (((auth.jwt() ->> 'email'::text) = 'amit@pbel.in'::text) OR ((auth.jwt() ->> 'email'::text) = 'vasu@pbel.in'::text))))
POLICY Allow public to view registrations FOR * TO public
  USING (true)

TRIGGERS:\nCREATE TRIGGER validate_last_played_date_trigger BEFORE INSERT ON tournament_registrations FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION validate_last_played_date()
CREATE TRIGGER validate_last_played_date_trigger BEFORE UPDATE ON tournament_registrations FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION validate_last_played_date()
CREATE TRIGGER sync_profile_image_from_registration_trigger AFTER UPDATE ON tournament_registrations FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION sync_profile_image_from_registration()
CREATE TRIGGER set_verified_at BEFORE UPDATE ON tournament_registrations FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_verified_at()

---------------------------------------\n"
"-- Table: tournament_registrations_backup_sizes

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
first_name text NOT NULL
last_name text NOT NULL
phone_number text NOT NULL
flat_number text NOT NULL
height numeric NOT NULL
registration_category USER-DEFINED NOT NULL
registration_type text NOT NULL
playing_positions ARRAY NOT NULL
skill_level USER-DEFINED NOT NULL
tshirt_number text NOT NULL
tshirt_name text NOT NULL
payment_upi_id text NOT NULL
payment_transaction_id text NOT NULL
paid_to text NOT NULL
created_at timestamp with time zone DEFAULT now()
updated_at timestamp with time zone DEFAULT now()
is_verified boolean DEFAULT false
last_played_date USER-DEFINED NOT NULL
email text
date_of_birth date
parent_name text
parent_phone_number text

CONSTRAINTS:\nCONSTRAINT tournament_registrations_backup_sizes_pkey PRIMARY KEY (id)

INDEXES:\nCREATE INDEX tournament_registrations_backup_sizes_skill_level_idx ON public.tournament_registrations_backup_sizes USING btree (skill_level)
CREATE INDEX tournament_registrations_backup_sizes_created_at_idx ON public.tournament_registrations_backup_sizes USING btree (created_at)
CREATE INDEX tournament_registrations_backup_sizes_registration_category_idx ON public.tournament_registrations_backup_sizes USING btree (registration_category)
CREATE UNIQUE INDEX tournament_registrations_backup_sizes_pkey ON public.tournament_registrations_backup_sizes USING btree (id)

FOREIGN KEYS:\nCONSTRAINT tournament_registrations_backup_sizes_pkey PRIMARY KEY (id)

---------------------------------------\n"
"-- Table: tournament_registrations_backup_youth_sizes

COLUMNS:\nid uuid
first_name text
last_name text
phone_number text
flat_number text
height numeric
registration_category USER-DEFINED
registration_type text
playing_positions ARRAY
skill_level USER-DEFINED
tshirt_number text
tshirt_name text
payment_upi_id text
payment_transaction_id text
paid_to text
created_at timestamp with time zone
updated_at timestamp with time zone
is_verified boolean
last_played_date USER-DEFINED
email text
date_of_birth date
parent_name text
parent_phone_number text
verified_by_old uuid
verified_at timestamp with time zone
verification_notes text
verified_by text
amount_received numeric

---------------------------------------\n"
"-- Table: tournament_rules

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
rule_text text NOT NULL
rule_order integer NOT NULL
is_active boolean DEFAULT true
created_at timestamp with time zone DEFAULT now()
updated_at timestamp with time zone DEFAULT now()

CONSTRAINTS:\nCONSTRAINT tournament_rules_pkey PRIMARY KEY (id)

INDEXES:\nCREATE UNIQUE INDEX tournament_rules_pkey ON public.tournament_rules USING btree (id)

FOREIGN KEYS:\nCONSTRAINT tournament_rules_pkey PRIMARY KEY (id)

POLICIES:\nPOLICY Tournament rules are viewable by everyone FOR * TO public
  USING (true)

---------------------------------------\n"
"-- Table: tournaments

COLUMNS:\nid uuid NOT NULL DEFAULT uuid_generate_v4()
name text NOT NULL
description text
start_date date NOT NULL
end_date date NOT NULL
registration_deadline date NOT NULL
max_teams integer NOT NULL
max_players_per_team integer NOT NULL
min_players_per_team integer NOT NULL
team_points_budget integer NOT NULL
is_active boolean DEFAULT true
created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP

CONSTRAINTS:\nCONSTRAINT tournaments_name_key UNIQUE (name)
CONSTRAINT tournaments_pkey PRIMARY KEY (id)

INDEXES:\nCREATE UNIQUE INDEX tournaments_pkey ON public.tournaments USING btree (id)
CREATE UNIQUE INDEX tournaments_name_key ON public.tournaments USING btree (name)

FOREIGN KEYS:\nCONSTRAINT tournaments_name_key UNIQUE (name)
CONSTRAINT tournaments_pkey PRIMARY KEY (id)

POLICIES:\nPOLICY Tournaments are modifiable by specific users FOR * TO authenticated
  USING (true)
  WITH CHECK (true)
POLICY Tournaments are modifiable by admin users FOR * TO authenticated
  USING ((EXISTS ( SELECT 1
   FROM auth.users
  WHERE ((users.id = auth.uid()) AND ((users.raw_app_meta_data ->> 'role'::text) = 'admin'::text)))))
POLICY Tournaments are viewable by authenticated users FOR * TO authenticated
  USING (true)

TRIGGERS:\nCREATE TRIGGER update_tournaments_updated_at BEFORE UPDATE ON tournaments FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: users

COLUMNS:\nid uuid NOT NULL
email text NOT NULL
role USER-DEFINED NOT NULL DEFAULT 'TEAM_OWNER'::user_role
team_id uuid
name text
created_at timestamp with time zone NOT NULL DEFAULT now()
updated_at timestamp with time zone NOT NULL DEFAULT now()

CONSTRAINTS:\nCONSTRAINT users_email_key UNIQUE (email)
CONSTRAINT users_pkey PRIMARY KEY (id)
CONSTRAINT users_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)

INDEXES:\nCREATE UNIQUE INDEX users_email_key ON public.users USING btree (email)
CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)

FOREIGN KEYS:\nCONSTRAINT users_email_key UNIQUE (email)
CONSTRAINT users_pkey PRIMARY KEY (id)
CONSTRAINT users_team_id_fkey FOREIGN KEY (team_id) REFERENCES teams(id)

POLICIES:\nPOLICY Only conductor can update user roles FOR * TO public
  USING ((EXISTS ( SELECT 1
   FROM users users_1
  WHERE ((users_1.id = auth.uid()) AND (users_1.role = 'CONDUCTOR'::user_role)))))
  WITH CHECK ((EXISTS ( SELECT 1
   FROM users users_1
  WHERE ((users_1.id = auth.uid()) AND (users_1.role = 'CONDUCTOR'::user_role)))))
POLICY Users can update their own data FOR * TO public
  USING ((auth.uid() = id))
  WITH CHECK ((auth.uid() = id))
POLICY Users can view their own data FOR * TO public
  USING ((auth.uid() = id))

TRIGGERS:\nCREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users FOR EACH ROW EXECUTE FUNCTION EXECUTE FUNCTION update_updated_at_column()

---------------------------------------\n"
"-- Table: verification_statistics

COLUMNS:\nverifier_email text
total_verifications bigint
verifications_last_24h bigint
first_verification timestamp with time zone
last_verification timestamp with time zone

---------------------------------------\n"